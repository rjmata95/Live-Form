{"ast":null,"code":"var _jsxFileName = \"/home/rjmata95/Desktop/Learning/platzi/react/hello-react/src/pages/MainApp.js\";\nimport React from \"react\";\nimport \"./styles/MainApp.css\";\nimport NavBar from \"../components/NavBar\";\nimport EmployeeForm from \"../components/EmployeeForm\";\nimport EmployeeTable from \"../components/EmployeeTable\";\nimport { v4 as uuid } from \"uuid\";\nimport formValidation from \"../components/formValidation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formInitialState = {\n  name: \"\",\n  nameError: null,\n  email: \"\",\n  emailError: null,\n  role: \"\",\n  roleError: null,\n  dob: \"\",\n  dobError: null,\n  gender: \"\",\n  genderError: null\n};\n\nclass mainApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchData = async () => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const response = await fetch(\"http://localhost:8080/table\");\n        const data = await response.json();\n        this.setState({\n          loading: false,\n          table: {\n            data: data.body\n          }\n        });\n        console.log(data);\n      } catch (error) {\n        this.setState({\n          loading: false,\n          error\n        });\n        console.log(`there's been an error: ${error}`);\n      }\n    };\n\n    this.submitData = async data => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const response = await fetch(\"http://localhost:8080/table\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(data)\n        });\n        this.setState({\n          loading: false\n        });\n        return Promise.resolve(response);\n      } catch (error) {\n        this.setState({\n          loading: false,\n          error\n        });\n        console.log(`there was an Error during POST method: ${error}`);\n        return Promise.reject(error);\n      }\n    };\n\n    this.setNewEntries = () => {};\n\n    this.formChange = e => {\n      this.setState(state => ({\n        form: { ...state.form,\n          [e.target.name]: e.target.value\n        }\n      }));\n    };\n\n    this.formSubmitted = e => {\n      e.preventDefault(); //validate entries from this.state.form\n\n      let state = this.state;\n      this.setState(state => {\n        let nameError = formValidation.validateName(state.form.name);\n        let emailError = formValidation.validateEmail(state.form.email);\n        let roleError = formValidation.validateRole(state.form.role);\n        let dobError = formValidation.validateDOB(state.form.dob);\n        let genderError = formValidation.validateGender(state.form.gender);\n        let newData;\n\n        if (nameError === null && emailError === null && roleError === null && dobError === null && genderError === null) {\n          newData = state.table.data.concat({\n            _id: uuid(),\n            ...state.form\n          });\n          this.submitData(newData).then(response => {\n            console.log(response);\n            return {\n              form: formInitialState,\n              table: {\n                data: newData\n              }\n            };\n          }).catch(error => {\n            console.log(error);\n            return {\n              form: formInitialState\n            };\n          });\n        } else {\n          return {\n            form: {\n              nameError,\n              emailError,\n              roleError,\n              dobError,\n              genderError\n            }\n          };\n        }\n      }); //toggle submit to true (may not be necessary)\n    };\n\n    this.state = {\n      loading: true,\n      error: null,\n      form: formInitialState,\n      table: {\n        submit: false,\n        data: [// {\n          //   name: \"Raynulfo Mata\",\n          //   email: \"rjmata95@gmail.com\",\n          //   role: \"JrDev\",\n          //   dob: \"12/19/1995\",\n          //   gender: \"male\",\n          // },\n        ]\n      }\n    };\n  }\n\n  componentDidMount() {\n    // this.setState({\n    //   loading: false,\n    // });\n    this.fetchData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"green-bg\",\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(EmployeeForm, {\n          onChange: this.formChange,\n          formState: this.state.form,\n          onSubmit: this.formSubmitted\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(EmployeeTable, {\n          updateTable: this.state.table.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default mainApp;","map":{"version":3,"sources":["/home/rjmata95/Desktop/Learning/platzi/react/hello-react/src/pages/MainApp.js"],"names":["React","NavBar","EmployeeForm","EmployeeTable","v4","uuid","formValidation","formInitialState","name","nameError","email","emailError","role","roleError","dob","dobError","gender","genderError","mainApp","Component","constructor","props","fetchData","setState","loading","response","fetch","data","json","table","body","console","log","error","submitData","method","headers","JSON","stringify","Promise","resolve","reject","setNewEntries","formChange","e","state","form","target","value","formSubmitted","preventDefault","validateName","validateEmail","validateRole","validateDOB","validateGender","newData","concat","_id","then","catch","submit","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./styles/MainApp.css\";\nimport NavBar from \"../components/NavBar\";\nimport EmployeeForm from \"../components/EmployeeForm\";\nimport EmployeeTable from \"../components/EmployeeTable\";\nimport { v4 as uuid } from \"uuid\";\nimport formValidation from \"../components/formValidation\";\n\nconst formInitialState = {\n  name: \"\",\n  nameError: null,\n  email: \"\",\n  emailError: null,\n  role: \"\",\n  roleError: null,\n  dob: \"\",\n  dobError: null,\n  gender: \"\",\n  genderError: null,\n};\nclass mainApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      error: null,\n      form: formInitialState,\n      table: {\n        submit: false,\n        data: [\n          // {\n          //   name: \"Raynulfo Mata\",\n          //   email: \"rjmata95@gmail.com\",\n          //   role: \"JrDev\",\n          //   dob: \"12/19/1995\",\n          //   gender: \"male\",\n          // },\n        ],\n      },\n    };\n  }\n\n  componentDidMount() {\n    // this.setState({\n    //   loading: false,\n    // });\n    this.fetchData();\n  }\n\n  fetchData = async () => {\n    this.setState({ loading: true });\n    try {\n      const response = await fetch(\"http://localhost:8080/table\");\n      const data = await response.json();\n      this.setState({\n        loading: false,\n        table: { data: data.body },\n      });\n\n      console.log(data);\n    } catch (error) {\n      this.setState({\n        loading: false,\n        error,\n      });\n      console.log(`there's been an error: ${error}`);\n    }\n  };\n\n  submitData = async (data) => {\n    this.setState({ loading: true });\n    try {\n      const response = await fetch(\"http://localhost:8080/table\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n      this.setState({ loading: false });\n      return Promise.resolve(response);\n    } catch (error) {\n      this.setState({\n        loading: false,\n        error,\n      });\n      console.log(`there was an Error during POST method: ${error}`);\n      return Promise.reject(error);\n    }\n  };\n\n  setNewEntries = () => {};\n\n  formChange = (e) => {\n    this.setState((state) => ({\n      form: {\n        ...state.form,\n        [e.target.name]: e.target.value,\n      },\n    }));\n  };\n  formSubmitted = (e) => {\n    e.preventDefault();\n    //validate entries from this.state.form\n    let state = this.state;\n    this.setState((state) => {\n      let nameError = formValidation.validateName(state.form.name);\n      let emailError = formValidation.validateEmail(state.form.email);\n      let roleError = formValidation.validateRole(state.form.role);\n      let dobError = formValidation.validateDOB(state.form.dob);\n      let genderError = formValidation.validateGender(state.form.gender);\n      let newData;\n\n      if (\n        nameError === null &&\n        emailError === null &&\n        roleError === null &&\n        dobError === null &&\n        genderError === null\n      ) {\n        newData = state.table.data.concat({\n          _id: uuid(),\n          ...state.form,\n        });\n        this.submitData(newData)\n          .then((response) => {\n            console.log(response);\n            return { form: formInitialState, table: { data: newData } };\n          })\n          .catch((error) => {\n            console.log(error);\n            return { form: formInitialState };\n          });\n      } else {\n        return {\n          form: { nameError, emailError, roleError, dobError, genderError },\n        };\n      }\n    });\n\n    //toggle submit to true (may not be necessary)\n  };\n  render() {\n    return (\n      <div className=\"green-bg\">\n        <NavBar />\n        <div>\n          <EmployeeForm\n            onChange={this.formChange}\n            formState={this.state.form}\n            onSubmit={this.formSubmitted}\n          />\n        </div>\n        <div>\n          <EmployeeTable updateTable={this.state.table.data} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default mainApp;\n"]},"metadata":{},"sourceType":"module"}